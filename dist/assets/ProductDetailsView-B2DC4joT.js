import{g as x,p as J,q as de,o as n,c as i,a as e,z as pe,t as u,f as z,k as P,i as k,j as Q,F as j,b as D,d as K,v as V,w as W,A as ye,x as me,u as xe,B as H,n as ve,l as fe,C as be}from"./index-D3wbM7oO.js";import{a as se}from"./products-Dz_E5vv_.js";import{_ as X}from"./Button-1RoVZDeX.js";import{_ as oe,a as he}from"./NumberInput-CUzi_oTe.js";import{g as Y}from"./auth-Buz3Qiex.js";const ee="https://api.mgoods.uz/api";async function ke(){try{const U=await Y(),m=await fetch(`${ee}/product-options/get`,{headers:U});if(!m.ok){const w=await m.json();throw new Error(w.message||"Failed to fetch product options")}return(await m.json()).data}catch(U){throw console.error("Error fetching product options:",U),U}}async function we(U){try{const m=await Y(),f=await fetch(`${ee}/product-option-values/product-option/${U}/get`,{headers:m});if(!f.ok){const r=await f.json();throw new Error(r.message||"Failed to fetch option values")}return(await f.json()).data}catch(m){throw console.error("Error fetching option values:",m),m}}async function _e(U,m){try{const f=await Y(),w=new FormData;Object.keys(m).forEach(v=>{m[v]!==null&&m[v]!==void 0&&w.append(v,m[v])});const r=await fetch(`${ee}/products/product/${U}/p-variants/create`,{method:"POST",headers:{...f},body:w});if(!r.ok){const v=await r.json();throw new Error(v.message||"Failed to create variant")}return(await r.json()).data}catch(f){throw console.error("Error creating variant:",f),f}}const Ue={class:"h-full"},$e={key:0,class:"flex items-center justify-center h-full"},Ce={key:0,class:"bg-red-50 dark:bg-red-900/50 text-red-600 dark:text-red-400 p-3 rounded-md text-sm"},Ve={key:1,class:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4"},Pe={class:"text-gray-700 dark:text-gray-300"},Se=["value"],Ae={key:2},ze=["value"],Ie={class:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4 space-y-4"},Fe={class:"grid grid-cols-2 gap-4"},Ee={class:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4 space-y-4"},je={class:"grid grid-cols-2 gap-4"},Me={class:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4 space-y-2"},Be={class:"flex justify-end space-x-3 pt-4 mt-6 border-t border-gray-200 dark:border-gray-700"},Ke={__name:"AddVariantForm",props:{productId:{type:[Number,String],required:!0},productName:{type:String,required:!0}},emits:["close","variant-added"],setup(U,{emit:m}){const f=U,w=m,r=x(!1),_=x(!1),v=x(""),S=x([]),$=x([]),M=x(""),I=x(null),l=x({buy_price:"",sell_price:"",product_option_value_id:"",image:null,ean13:""}),F=J(()=>I.value?`${f.productName} (${I.value.value})`:"");de(async()=>{try{r.value=!0,S.value=await ke()}catch(b){v.value=b.message||"Failed to load product options"}finally{r.value=!1}});const O=async()=>{if(!M.value){$.value=[],l.value.product_option_value_id="",I.value=null;return}try{r.value=!0,$.value=await we(M.value)}catch(b){v.value=b.message||"Failed to load option values",$.value=[]}finally{r.value=!1}},N=()=>{I.value=$.value.find(b=>b.id===l.value.product_option_value_id)},T=b=>{l.value.image=b},C=()=>l.value.product_option_value_id?null:"Option value is required",B=async()=>{if(_.value)return;v.value="";const b=C();if(b){v.value=b;return}try{_.value=!0;const o={...l.value,name:F.value,product_id:f.productId},y=await _e(f.productId,o);w("variant-added",y),w("close")}catch(o){v.value=o.message||"Failed to create variant"}finally{_.value=!1}};return(b,o)=>(n(),i("div",Ue,[r.value?(n(),i("div",$e,o[7]||(o[7]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"},null,-1)]))):(n(),i("form",{key:1,onSubmit:o[6]||(o[6]=pe(()=>{},["prevent"])),class:"space-y-6 px-4 py-5"},[v.value?(n(),i("div",Ce,u(v.value),1)):z("",!0),F.value?(n(),i("div",Ve,[o[8]||(o[8]=e("h3",{class:"font-medium text-gray-900 dark:text-white mb-2"},"Variant Name Preview",-1)),e("p",Pe,u(F.value),1)])):z("",!0),e("div",null,[o[10]||(o[10]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},[P(" Option Type "),e("span",{class:"text-red-500"},"*")],-1)),k(e("select",{"onUpdate:modelValue":o[0]||(o[0]=y=>M.value=y),onChange:O,class:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white px-4 py-2.5 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},[o[9]||(o[9]=e("option",{value:""},"Select an option",-1)),(n(!0),i(j,null,D(S.value,y=>(n(),i("option",{key:y.id,value:y.id},u(y.name),9,Se))),128))],544),[[Q,M.value]])]),$.value.length>0?(n(),i("div",Ae,[o[12]||(o[12]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},[P(" Option Value "),e("span",{class:"text-red-500"},"*")],-1)),k(e("select",{"onUpdate:modelValue":o[1]||(o[1]=y=>l.value.product_option_value_id=y),onChange:N,class:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white px-4 py-2.5 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},[o[11]||(o[11]=e("option",{value:""},"Select a value",-1)),(n(!0),i(j,null,D($.value,y=>(n(),i("option",{key:y.id,value:y.id},u(y.value),9,ze))),128))],544),[[Q,l.value.product_option_value_id]])])):z("",!0),e("div",Ie,[o[15]||(o[15]=e("h3",{class:"font-medium text-gray-900 dark:text-white"},"Pricing",-1)),e("div",Fe,[e("div",null,[o[13]||(o[13]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Buy Price ",-1)),K(oe,{modelValue:l.value.buy_price,"onUpdate:modelValue":o[2]||(o[2]=y=>l.value.buy_price=y),placeholder:"0.00",class:"w-full"},null,8,["modelValue"])]),e("div",null,[o[14]||(o[14]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Sell Price ",-1)),K(oe,{modelValue:l.value.sell_price,"onUpdate:modelValue":o[3]||(o[3]=y=>l.value.sell_price=y),placeholder:"0.00",class:"w-full"},null,8,["modelValue"])])])]),e("div",Ee,[o[17]||(o[17]=e("h3",{class:"font-medium text-gray-900 dark:text-white"},"Product Identifiers",-1)),e("div",je,[e("div",null,[o[16]||(o[16]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," EAN13 ",-1)),k(e("input",{"onUpdate:modelValue":o[4]||(o[4]=y=>l.value.ean13=y),type:"text",class:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white px-4 py-2.5 focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Enter EAN13"},null,512),[[V,l.value.ean13]])])])]),e("div",Me,[o[18]||(o[18]=e("h3",{class:"font-medium text-gray-900 dark:text-white"},"Product Image",-1)),K(he,{onImageSelected:T})]),e("div",Be,[K(X,{type:"button",variant:"secondary",loading:_.value,disabled:_.value,onClick:o[5]||(o[5]=y=>b.$emit("close"))},{default:W(()=>o[19]||(o[19]=[P(" Cancel ")])),_:1},8,["loading","disabled"]),K(X,{type:"submit",variant:"primary",loading:_.value,disabled:_.value,onClick:B},{default:W(()=>[P(u(_.value?"Adding...":"Add Variant"),1)]),_:1},8,["loading","disabled"])])],32))]))}},Ne={class:"container mx-auto px-4 py-6"},De={key:0,class:"flex justify-center items-center h-64"},Oe={key:1,class:"bg-red-50 dark:bg-red-900/50 text-red-600 dark:text-red-400 p-4 rounded-lg"},Te={key:2,class:"space-y-6"},Le={class:"mb-6"},Ze={class:"space-y-6"},He={class:"flex justify-between items-start"},qe={class:"text-3xl font-bold text-gray-900 dark:text-white"},Re={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Ge={class:"lg:col-span-2 space-y-6"},Je={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-6 mb-6"},Qe={class:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4"},We={class:"space-y-1"},Xe={class:"space-y-1"},Ye=["value","selected"],et={class:"space-y-1"},tt={class:"mt-1 text-gray-900 dark:text-white"},at={class:"space-y-1"},rt={class:"space-y-1"},st={class:"mt-1 text-gray-900 dark:text-white"},ot={class:"space-y-1"},dt={class:"mt-1 text-gray-900 dark:text-white"},lt={class:"space-y-1"},nt={class:"space-y-1"},it={class:"space-y-1"},ut={class:"space-y-1"},ct={class:"space-y-1"},gt={key:0,class:"mt-1 relative rounded-md shadow-sm"},pt=["value"],yt={class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},mt={class:"text-gray-500 dark:text-gray-400 sm:text-sm"},xt={key:1,class:"mt-2 text-sm text-gray-900 dark:text-white"},vt={class:"space-y-1"},ft={class:"mt-1 relative rounded-md shadow-sm"},bt=["value"],ht={class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},kt={class:"text-gray-500 dark:text-gray-400 sm:text-sm"},wt={class:"space-y-6"},_t={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-6"},Ut={class:"relative group"},$t=["src","alt"],Ct={key:0,class:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 rounded-lg"},Vt={class:"text-white text-center"},Pt={class:"w-48 h-2 bg-gray-200 rounded-full"},St={class:"flex justify-between items-center mt-4"},At={class:"relative"},zt={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-6"},It={class:"flex justify-between items-center mb-4"},Ft={key:0,class:"relative"},Et={class:"overflow-x-auto"},jt={class:"inline-block min-w-full align-middle"},Mt={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 rounded-lg"},Bt={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Kt={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Nt={class:"px-6 py-4 whitespace-nowrap w-24"},Dt=["src","alt"],Ot={class:"px-6 py-4"},Tt={class:"text-sm text-gray-900 dark:text-gray-100"},Lt={class:"px-6 py-4 whitespace-nowrap"},Zt={class:"text-sm text-gray-900 dark:text-gray-100"},Ht={class:"px-6 py-4 whitespace-nowrap"},qt={key:0,class:"relative rounded-md shadow-sm"},Rt=["value","onChange"],Gt={class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},Jt={class:"text-gray-500 dark:text-gray-400 sm:text-sm"},Qt={key:1,class:"text-sm text-gray-500 dark:text-gray-400"},Wt={class:"px-6 py-4 whitespace-nowrap"},Xt={class:"relative rounded-md shadow-sm"},Yt=["value","onChange"],ea={class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},ta={class:"text-gray-500 dark:text-gray-400 sm:text-sm"},aa={class:"px-6 py-4 whitespace-nowrap"},ra={class:"relative rounded-md shadow-sm"},sa=["onUpdate:modelValue","onChange"],oa={class:"px-6 py-4 whitespace-nowrap"},da={class:"relative rounded-md shadow-sm"},la=["onUpdate:modelValue","onChange"],na={class:"px-6 py-4 whitespace-nowrap"},ia={class:"relative rounded-md shadow-sm"},ua=["onUpdate:modelValue","onChange"],ca={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},ga=["onClick"],pa={key:1,class:"text-center py-8"},ya={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-6"},ma={key:0,class:"relative"},xa={key:0,class:"absolute inset-0 bg-white/50 dark:bg-gray-800/50 flex items-center justify-center z-10"},va={class:"overflow-x-auto"},fa={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},ba={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},ha={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},ka={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},wa={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},_a={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Ua={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},$a={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Ca={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Va={key:0,class:"mt-4 flex items-center justify-between border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 px-4 py-3 sm:px-6"},Pa={class:"flex flex-1 justify-between sm:hidden"},Sa=["disabled"],Aa=["disabled"],za={class:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between"},Ia={class:"text-sm text-gray-700 dark:text-gray-300"},Fa={class:"font-medium"},Ea={class:"font-medium"},ja={class:"font-medium"},Ma={class:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination"},Ba=["disabled"],Ka=["onClick"],Na=["disabled"],Da={key:1,class:"text-center py-8"},Oa={class:"fixed inset-y-0 right-0 w-96 bg-white dark:bg-gray-800 shadow-xl z-50"},Ta={class:"h-full flex flex-col"},La={class:"flex-1 overflow-y-auto"},q="https://api.mgoods.uz",Ja={__name:"ProductDetailsView",setup(U){const m=fe(),{user:f}=be(),w=J(()=>{var s;return((s=f.value)==null?void 0:s.type)==="superadmin"}),r=x(null),_=x([]),v=x(!1),S=x(null),$=x(!1),M=x(1),I=x([]),l=x(null),F=x(!1),O=x(!1),N=x(null),T=x(null),C=ye(),B=()=>{const s=localStorage.getItem("token");if(!s)throw new Error("No authentication token found");return s},b=async()=>{try{const s=B(),t=await H.get(`${q}/api/categories/get`,{headers:{Authorization:`Bearer ${s}`,Accept:"application/json"}});t.data.status&&(_.value=t.data.data)}catch(s){console.error("Error fetching categories:",s)}};async function o(s,t){try{const c=B(),[p]=Object.keys(t),a=t[p];console.log("Sending update:",{property:p,value:a});const d=new URLSearchParams;d.append("property",p),d.append("value",a);const g=await H.put(`${q}/api/products/product/${s}/putByPropertyName`,d,{headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json",Authorization:`Bearer ${c}`}});return console.log("Server response:",g.data),g.data}catch(c){throw console.error("Error updating product:",c),c}}const y=J(()=>I.value.map(s=>({...s,formattedDate:te(s.created_at),formattedUpdated:te(s.updated_at)}))),te=s=>new Date(s).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}),A=async(s,t)=>{var c,p;try{console.log("Updating field:",s,"with value:",t);const a=await o(m.params.id,{[s]:t});console.log("Update response:",a),a.status?(C.success(a.message),r.value={...r.value,...a.data},console.log("Updated product:",r.value),console.log(`Successfully updated ${s}`)):(C.error(a.message),console.error(`Failed to update ${s}`),r.value[s]=r.value[s])}catch(a){C.error(((p=(c=a.response)==null?void 0:c.data)==null?void 0:p.message)||"An error occurred while updating the field"),console.error(`Error updating ${s}:`,a),r.value[s]=r.value[s]}},L=async(s,t,c)=>{var p,a,d;try{console.log("Updating variant field:",t,"with value:",c);const g=await H.put(`${q}/api/products/product/p-variants/${s}/put`,{[t]:c},{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${B()}`}});if(console.log("Update response:",g.data),(p=g.data)!=null&&p.status){C.success(g.data.message);const h=r.value.variants.findIndex(E=>E.id===s);h!==-1&&(r.value.variants[h]={...r.value.variants[h],[t]:c}),console.log(`Successfully updated ${t}`)}else{C.error(g.data.message),console.error(`Failed to update ${t}`);const h=r.value.variants.findIndex(E=>E.id===s);h!==-1&&(r.value.variants[h][t]=r.value.variants[h][t])}}catch(g){C.error(((d=(a=g.response)==null?void 0:a.data)==null?void 0:d.message)||"An error occurred while updating the variant"),console.error(`Error updating ${t}:`,g);const h=r.value.variants.findIndex(E=>E.id===s);h!==-1&&(r.value.variants[h][t]=r.value.variants[h][t])}},le=async s=>{var t,c;try{(await H.delete(`${q}/api/products/product/p-variants/${s}/delete`,{headers:{Authorization:`Bearer ${B()}`}})).status===200&&(r.value.variants=r.value.variants.filter(a=>a.id!==s),C.success("Variant deleted successfully"))}catch(p){console.error("Error deleting variant:",p),C.error(((c=(t=p.response)==null?void 0:t.data)==null?void 0:c.message)||"Failed to delete variant")}},ne=(s,t)=>{const c=[];if(s<=5)for(let a=1;a<=s;a++)c.push(a);else{c.push(1);let a=Math.max(2,t-1),d=Math.min(s-1,t+1);t<=3&&(d=4),t>=s-2&&(a=s-3),a>2&&c.push("...");for(let g=a;g<=d;g++)c.push(g);d<s-1&&c.push("..."),s!==1&&c.push(s)}return c},G=async()=>{if(!O.value){O.value=!0,S.value=null;try{const s=await se(m.params.id);s.data&&(r.value=s.data,I.value=s.data.price_histories||[],l.value=s.data.price_history_meta||null)}catch(s){S.value="Failed to load product details",console.error("Error fetching product:",s)}finally{O.value=!1}}},ae=async(s=1)=>{var t,c;if(!F.value){F.value=!0;try{const p=await se(m.params.id,{page:s,per_page:5});((c=(t=p.data)==null?void 0:t.price_histories)==null?void 0:c.length)>0&&(I.value=p.data.price_histories,l.value=p.data.price_history_meta)}catch(p){console.error("Error fetching price history:",p)}finally{F.value=!1}}},Z=async s=>{s!==M.value&&(M.value=s,await ae(s))},ie=()=>{$.value=!0},R=()=>{$.value=!1},ue=async()=>{R(),await G()};de(async()=>{v.value=!0,S.value=null;try{await Promise.all([G(),b(),ae(1)])}catch(s){S.value=s.message||"Failed to load product details"}finally{v.value=!1}});const ce=async s=>{var t,c,p,a;try{const d=s.target.files[0];if(!d)return;if(!["image/jpeg","image/png","image/jpg"].includes(d.type)){alert("Please select a valid image file (JPEG, PNG, or JPG)");return}if(d.size>2*1024*1024){alert("Image size should be less than 2MB");return}const g=new FormData;g.append("image",d),g.append("name",r.value.name),g.append("category_id",r.value.category_id),g.append("store_id",r.value.store_id),g.append("buy_price",r.value.buy_price),g.append("sell_price",r.value.sell_price),g.append("IKPU",r.value.IKPU),g.append("currency",r.value.currency),g.append("uzum_sku_title",r.value.uzum_sku_title||""),g.append("weight",r.value.weight||""),g.append("ean13",r.value.ean13||"");const h=B();if(!h)throw new Error("Authentication token not found");const E=await H.post(`${q}/api/products/product/${m.params.id}/update`,g,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${h}`,Accept:"application/json"},onUploadProgress:re=>{const ge=Math.round(re.loaded*100/re.total);N.value=ge}});if((t=E.data)!=null&&t.status)await G(),alert("Image uploaded successfully");else throw new Error(((c=E.data)==null?void 0:c.message)||"Failed to upload image");T.value&&(T.value.value="")}catch(d){console.error("Error uploading image:",d),alert(((a=(p=d.response)==null?void 0:p.data)==null?void 0:a.message)||d.message||"Failed to upload image. Please try again.")}finally{N.value=null}};return(s,t)=>{var c,p;return n(),i(j,null,[e("div",Ne,[v.value?(n(),i("div",De,t[22]||(t[22]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"},null,-1)]))):S.value?(n(),i("div",Oe,u(S.value),1)):r.value?(n(),i("div",Te,[e("div",Le,[e("button",{onClick:t[0]||(t[0]=a=>s.$router.back()),class:"flex items-center text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-white"},t[23]||(t[23]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),P(" Back to Products ")]))]),e("div",Ze,[e("div",He,[e("h1",qe,u(r.value.name),1)]),e("div",Re,[e("div",Ge,[e("div",Je,[t[37]||(t[37]=e("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-4"},"Basic Information",-1)),e("div",Qe,[e("div",We,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Name",-1)),k(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>r.value.name=a),onChange:t[2]||(t[2]=a=>A("name",r.value.name)),class:"mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm transition-colors duration-200 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400",type:"text",placeholder:"Enter product name"},null,544),[[V,r.value.name]])]),e("div",Xe,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Category",-1)),k(e("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>r.value.category_id=a),onChange:t[4]||(t[4]=a=>A("category_id",r.value.category_id)),class:"mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm transition-colors duration-200 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400"},[t[25]||(t[25]=e("option",{value:""},"Select category",-1)),(n(!0),i(j,null,D(_.value,a=>{var d;return n(),i("option",{key:a.id,value:a.id,selected:a.id===((d=r.value)==null?void 0:d.category_id)},u(a.name),9,Ye)}),128))],544),[[Q,r.value.category_id]])]),e("div",et,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Store",-1)),e("p",tt,u(((c=r.value.store)==null?void 0:c.name)||"N/A"),1)]),e("div",at,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"IKPU",-1)),k(e("input",{"onUpdate:modelValue":t[5]||(t[5]=a=>r.value.IKPU=a),onChange:t[6]||(t[6]=a=>A("IKPU",r.value.IKPU)),class:"mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm transition-colors duration-200 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400",type:"text",placeholder:"Enter IKPU"},null,544),[[V,r.value.IKPU]])]),e("div",rt,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Article",-1)),e("p",st,u(r.value.article||"N/A"),1)]),e("div",ot,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"SKU",-1)),e("p",dt,u(r.value.sku||"N/A"),1)]),e("div",lt,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"UZUM SKU",-1)),k(e("input",{"onUpdate:modelValue":t[7]||(t[7]=a=>r.value.uzum_sku=a),onChange:t[8]||(t[8]=a=>A("uzum_sku",r.value.uzum_sku)),class:"mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm transition-colors duration-200 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400",type:"text",placeholder:"Enter UZUM SKU"},null,544),[[V,r.value.uzum_sku]])]),e("div",nt,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"UZUM SKU 2",-1)),k(e("input",{"onUpdate:modelValue":t[9]||(t[9]=a=>r.value.uzum_sku_title=a),onChange:t[10]||(t[10]=a=>A("uzum_sku_title",r.value.uzum_sku_title)),class:"mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm transition-colors duration-200 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400",type:"text",placeholder:"Enter UZUM SKU 2"},null,544),[[V,r.value.uzum_sku_title]])]),e("div",it,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Weight",-1)),k(e("input",{"onUpdate:modelValue":t[11]||(t[11]=a=>r.value.weight=a),onChange:t[12]||(t[12]=a=>A("weight",r.value.weight)),class:"mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm transition-colors duration-200 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400",type:"text",placeholder:"Enter weight"},null,544),[[V,r.value.weight]])]),e("div",ut,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"EAN13",-1)),k(e("input",{"onUpdate:modelValue":t[13]||(t[13]=a=>r.value.ean13=a),onChange:t[14]||(t[14]=a=>A("ean13",r.value.ean13)),class:"mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm transition-colors duration-200 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400",type:"text",placeholder:"Enter EAN13"},null,544),[[V,r.value.ean13]])]),e("div",ct,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Buy Price",-1)),w.value?(n(),i("div",gt,[e("input",{value:Intl.NumberFormat().format(parseFloat(r.value.buy_price).toFixed(0)),onChange:t[15]||(t[15]=a=>A("buy_price",a.target.value.replace(/\D/g,""))),class:"block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm pr-12 transition-colors duration-200 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400",type:"text",placeholder:"0"},null,40,pt),e("div",yt,[e("span",mt,u(r.value.currency),1)])])):(n(),i("div",xt,u(Intl.NumberFormat().format(parseFloat(r.value.buy_price).toFixed(0)))+" "+u(r.value.currency),1))]),e("div",vt,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Sell Price",-1)),e("div",ft,[e("input",{value:Intl.NumberFormat().format(parseFloat(r.value.sell_price).toFixed(0)),onChange:t[16]||(t[16]=a=>A("sell_price",a.target.value.replace(/\D/g,""))),class:"block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm pr-12 transition-colors duration-200 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400",type:"text",placeholder:"0"},null,40,bt),e("div",ht,[e("span",kt,u(r.value.currency),1)])])])])])]),e("div",wt,[e("div",_t,[t[39]||(t[39]=e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white text-center mb-2"},"Product Image",-1)),e("div",Ut,[e("img",{src:r.value.image||"https://via.placeholder.com/300",alt:r.value.name,class:"w-full rounded-lg"},null,8,$t),N.value!==null?(n(),i("div",Ct,[e("div",Vt,[t[38]||(t[38]=e("div",{class:"mb-2"},"Uploading...",-1)),e("div",Pt,[e("div",{class:"h-full bg-indigo-600 rounded-full transition-all duration-300",style:me({width:`${N.value}%`})},null,4)])])])):z("",!0)]),e("div",St,[e("div",At,[e("input",{type:"file",ref_key:"fileInput",ref:T,onChange:ce,accept:"image/jpeg,image/png,image/jpg",class:"hidden"},null,544),e("button",{onClick:t[17]||(t[17]=a=>s.$refs.fileInput.click()),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-800"}," Change Image ")])])])])]),e("div",zt,[e("div",It,[t[41]||(t[41]=e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white"},"Product Variants",-1)),K(X,{onClick:ie,variant:"primary",class:"px-4 py-2"},{default:W(()=>t[40]||(t[40]=[P("Add Variant")])),_:1})]),(p=r.value.variants)!=null&&p.length?(n(),i("div",Ft,[e("div",Et,[e("div",jt,[e("div",Mt,[e("table",Bt,[t[42]||(t[42]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-24"},"Image"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider min-w-[400px]"},"Name"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"SKU"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider min-w-[160px]"},"Buy Price"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider min-w-[160px]"},"Sell Price"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider min-w-[180px]"},"UZUM SKU"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider min-w-[180px]"},"UZUM SKU 2"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider min-w-[160px]"},"EAN13"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-24"},"Actions")])],-1)),e("tbody",Kt,[(n(!0),i(j,null,D(r.value.variants,a=>(n(),i("tr",{key:a.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[e("td",Nt,[e("img",{src:a.image,alt:a.name,class:"h-12 w-12 object-cover rounded-lg"},null,8,Dt)]),e("td",Ot,[e("div",Tt,u(a.name),1)]),e("td",Lt,[e("div",Zt,u(a.sku),1)]),e("td",Ht,[w.value?(n(),i("div",qt,[e("input",{value:Intl.NumberFormat().format(parseFloat(a.buy_price).toFixed(0)),onChange:d=>L(a.id,"buy_price",d.target.value.replace(/\D/g,"")),class:"block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 transition-colors duration-200",type:"text",placeholder:"0"},null,40,Rt),e("div",Gt,[e("span",Jt,u(r.value.currency),1)])])):(n(),i("div",Qt,u(Intl.NumberFormat().format(parseFloat(a.buy_price).toFixed(0)))+" "+u(r.value.currency),1))]),e("td",Wt,[e("div",Xt,[e("input",{value:Intl.NumberFormat().format(parseFloat(a.sell_price).toFixed(0)),onChange:d=>L(a.id,"sell_price",d.target.value.replace(/\D/g,"")),class:"block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 transition-colors duration-200",type:"text",placeholder:"0"},null,40,Yt),e("div",ea,[e("span",ta,u(r.value.currency),1)])])]),e("td",aa,[e("div",ra,[k(e("input",{"onUpdate:modelValue":d=>a.uzum_sku=d,onChange:d=>L(a.id,"uzum_sku",a.uzum_sku),class:"block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 transition-colors duration-200",type:"text",placeholder:"Enter UZUM SKU"},null,40,sa),[[V,a.uzum_sku]])])]),e("td",oa,[e("div",da,[k(e("input",{"onUpdate:modelValue":d=>a.uzum_sku_title=d,onChange:d=>L(a.id,"uzum_sku_title",a.uzum_sku_title),class:"block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 transition-colors duration-200",type:"text",placeholder:"Enter UZUM SKU 2"},null,40,la),[[V,a.uzum_sku_title]])])]),e("td",na,[e("div",ia,[k(e("input",{"onUpdate:modelValue":d=>a.ean13=d,onChange:d=>L(a.id,"ean13",a.ean13),class:"block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 transition-colors duration-200",type:"text",placeholder:"Enter EAN13"},null,40,ua),[[V,a.ean13]])])]),e("td",ca,[w.value?(n(),i("button",{key:0,onClick:d=>le(a.id),class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 transition-colors duration-200"}," Delete ",8,ga)):z("",!0)])]))),128))])])])])])])):(n(),i("div",pa,t[43]||(t[43]=[e("div",{class:"text-gray-500 dark:text-gray-400"},"No variants added yet",-1),e("p",{class:"text-sm text-gray-400 dark:text-gray-500 mt-2"},'Click the "Add Variant" button to create your first variant',-1)])))]),e("div",ya,[t[53]||(t[53]=e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"},"Price History",-1)),y.value.length?(n(),i("div",ma,[F.value?(n(),i("div",xa,t[44]||(t[44]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500"},null,-1)]))):z("",!0),e("div",va,[e("table",fa,[t[45]||(t[45]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Storage"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Product"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"SKU"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Buy Price"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Quantity"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Updated")])],-1)),e("tbody",ba,[(n(!0),i(j,null,D(y.value,a=>(n(),i("tr",{key:a.created_at,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[e("td",ha,u(a.formattedDate),1),e("td",ka,u(a.storage_id||"N/A"),1),e("td",wa,u(a.product_name),1),e("td",_a,u(a.sku),1),e("td",Ua,u(Number(a.real_buy_price).toLocaleString())+" "+u(r.value.currency),1),e("td",$a,u(Math.trunc(a.quantity)),1),e("td",Ca,u(a.formattedUpdated),1)]))),128))])]),l.value?(n(),i("div",Va,[e("div",Pa,[e("button",{onClick:t[18]||(t[18]=a=>Z(l.value.current_page-1)),disabled:!l.value.prev_page_url,class:"relative inline-flex items-center rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50"}," Previous ",8,Sa),e("button",{onClick:t[19]||(t[19]=a=>Z(l.value.current_page+1)),disabled:!l.value.next_page_url,class:"relative ml-3 inline-flex items-center rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50"}," Next ",8,Aa)]),e("div",za,[e("div",null,[e("p",Ia,[t[46]||(t[46]=P(" Showing ")),e("span",Fa,u((l.value.current_page-1)*l.value.per_page+1),1),t[47]||(t[47]=P(" to ")),e("span",Ea,u(Math.min(l.value.current_page*l.value.per_page,l.value.total)),1),t[48]||(t[48]=P(" of ")),e("span",ja,u(l.value.total),1),t[49]||(t[49]=P(" results "))])]),e("div",null,[e("nav",Ma,[e("button",{onClick:t[20]||(t[20]=a=>Z(l.value.current_page-1)),disabled:!l.value.prev_page_url,class:"relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 dark:text-gray-500 ring-1 ring-inset ring-gray-300 dark:ring-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 focus:z-20 focus:outline-offset-0 disabled:opacity-50"},t[50]||(t[50]=[e("span",{class:"sr-only"},"Previous",-1),e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z","clip-rule":"evenodd"})],-1)]),8,Ba),(n(!0),i(j,null,D(ne(l.value.last_page,l.value.current_page),a=>(n(),i("button",{key:a,onClick:d=>Z(a),class:ve({"relative z-10 inline-flex items-center bg-indigo-600 dark:bg-indigo-500 px-4 py-2 text-sm font-semibold text-white focus:z-20 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600":a===l.value.current_page,"relative inline-flex items-center px-4 py-2 text-sm font-semibold text-gray-900 dark:text-gray-300 ring-1 ring-inset ring-gray-300 dark:ring-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 focus:z-20 focus:outline-offset-0":a!==l.value.current_page,"pointer-events-none":a==="..."})},u(a),11,Ka))),128)),e("button",{onClick:t[21]||(t[21]=a=>Z(l.value.current_page+1)),disabled:!l.value.next_page_url,class:"relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 dark:text-gray-500 ring-1 ring-inset ring-gray-300 dark:ring-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 focus:z-20 focus:outline-offset-0 disabled:opacity-50"},t[51]||(t[51]=[e("span",{class:"sr-only"},"Next",-1),e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06.02z","clip-rule":"evenodd"})],-1)]),8,Na)])])])])):z("",!0)])])):(n(),i("div",Da,t[52]||(t[52]=[e("div",{class:"text-gray-500 dark:text-gray-400"},"No price history available",-1)])))])])])):z("",!0)]),$.value?(n(),i(j,{key:0},[e("div",{class:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:R}),e("div",Oa,[e("div",Ta,[e("div",{class:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between"},[t[54]||(t[54]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Add Variant",-1)),e("button",{onClick:R,class:"text-gray-400 hover:text-gray-500"},"Ã—")]),e("div",La,[K(Ke,{"product-id":xe(m).params.id,"product-name":r.value.name,onClose:R,onVariantAdded:ue},null,8,["product-id","product-name"])])])])],64)):z("",!0)],64)}}};export{Ja as default};
