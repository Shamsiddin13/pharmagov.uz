import{g as u,h as i}from"./auth-Buz3Qiex.js";const m="https://api.mgoods.uz/api";async function w(o=1,{...a}={}){var r,t,n,c,d;try{const p=await u(),e=new URLSearchParams;e.append("page",o),a.per_page&&e.append("per_page",a.per_page),(r=a.search)!=null&&r.trim()&&e.append("search",a.search.trim()),(t=a.name)!=null&&t.trim()&&e.append("name",a.name.trim()),(n=a.sku)!=null&&n.trim()&&e.append("sku",a.sku.trim()),(c=a.uzum_sku)!=null&&c.trim()&&e.append("uzum_sku",a.uzum_sku.trim()),(d=a.ean13)!=null&&d.trim()&&e.append("ean13",a.ean13.trim()),a.category_id&&a.category_id!=="all"&&e.append("category_id",a.category_id),a.store_id&&a.store_id!=="all"&&e.append("store_id",a.store_id);const g=`${m}/products/get?${e.toString()}`,h=await fetch(g,{headers:p}),s=await i(h);return{data:s.data||[],meta:s.meta||{},categories:s.categories||[],stores:s.stores||[]}}catch(p){throw console.error("Error fetching products:",p),p}}async function y(o,a={}){try{const r=await u(),t=new URLSearchParams;a.page&&t.append("page",a.page),a.per_page&&t.append("per_page",a.per_page);const n=`${m}/products/product/${o}${t.toString()?`?${t.toString()}`:""}`,c=await fetch(n,{headers:r});return await i(c)}catch(r){throw console.error("Error fetching product by ID:",r),new Error(r.message||"Failed to fetch product details")}}async function k(o){try{const a=await u(),r=`${m}/shipments/products/get?uzum_sku=${encodeURIComponent(o)}`,t=await fetch(r,{headers:a});return await i(t)}catch(a){throw console.error("Error validating Uzum SKU:",a),a}}export{y as a,w as f,k as v};
