import{O as $,o as u,c,a as t,i as v,v as f,d as l,w as _,k as x,n as K,g as h,q as D,h as V,F as B,b as M,t as n,f as O,l as C,m as j}from"./index-D3wbM7oO.js";import{_ as w}from"./Button-1RoVZDeX.js";import{_ as E}from"./Pagination-CtU1Q35g.js";import{a as A}from"./warehouse-Ds3tBLTz.js";import"./auth-Buz3Qiex.js";const N={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-6 mb-6"},W={class:"space-y-6"},I={class:"grid grid-cols-1 gap-4"},T={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},z={class:"col-span-full md:col-span-2"},H={class:"grid grid-cols-2 gap-4"},L={class:"flex justify-end space-x-4"},Q={__name:"WarehouseStockFilter",emits:["filter"],setup(p,{emit:b}){const y=b,o=$({sku:"",article:"",store:"",search:"",fromDate:"",toDate:""}),i=r=>{r.key==="Enter"&&g()},d=()=>{Object.keys(o).forEach(r=>{o[r]=""}),y("filter",{...o})},g=()=>{y("filter",{...o})};return(r,e)=>(u(),c("div",N,[t("div",W,[t("div",I,[t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Ummumiy qidirish",-1)),v(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>o.search=s),placeholder:"Mahsulotlarni qidirish...",class:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white px-4 py-2 focus:ring-2 focus:ring-indigo-500",onKeydown:i},null,544),[[f,o.search]])])]),t("div",T,[t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Artikul",-1)),v(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=s=>o.article=s),placeholder:"Artikul boyicha qidirish...",class:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white px-4 py-2 focus:ring-2 focus:ring-indigo-500",onKeydown:i},null,544),[[f,o.article]])]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"SKU",-1)),v(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=s=>o.sku=s),placeholder:"SKU boyicha qidirish...",class:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white px-4 py-2 focus:ring-2 focus:ring-indigo-500",onKeydown:i},null,544),[[f,o.sku]])]),t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Do'kon",-1)),v(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=s=>o.store=s),placeholder:"Do'kon nomi boyicha qidirish...",class:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white px-4 py-2 focus:ring-2 focus:ring-indigo-500",onKeydown:i},null,544),[[f,o.store]])]),t("div",z,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Sana oralig'i",-1)),t("div",H,[t("div",null,[v(t("input",{type:"date","onUpdate:modelValue":e[4]||(e[4]=s=>o.fromDate=s),class:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white px-4 py-2 focus:ring-2 focus:ring-indigo-500"},null,512),[[f,o.fromDate]])]),t("div",null,[v(t("input",{type:"date","onUpdate:modelValue":e[5]||(e[5]=s=>o.toDate=s),class:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white px-4 py-2 focus:ring-2 focus:ring-indigo-500"},null,512),[[f,o.toDate]])])])])]),t("div",L,[l(w,{onClick:d,variant:"secondary"},{default:_(()=>e[11]||(e[11]=[x("Filterni tozalash")])),_:1}),l(w,{onClick:g,variant:"primary"},{default:_(()=>e[12]||(e[12]=[x("Filterni qo'shish")])),_:1})])])]))}},R={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 15l7-7 7 7"},Y={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},m={__name:"SortIcon",props:{active:{type:Boolean,default:!1},direction:{type:String,default:"desc",validator:p=>["asc","desc"].includes(p)}},setup(p){return(b,y)=>(u(),c("svg",{class:K(["ml-1 w-3 h-3",{"text-gray-400":!p.active,"text-blue-500":p.active}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p.direction==="asc"?(u(),c("path",R)):(u(),c("path",Y))],2))}},G={class:"overflow-x-auto"},J={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},X={class:"bg-gray-50 dark:bg-gray-800"},Z={class:"flex items-center"},tt={class:"flex items-center"},et={class:"flex items-center"},rt={class:"flex items-center"},st={class:"flex items-center"},at={class:"flex items-center"},ot={class:"flex items-center"},it={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},dt={class:"px-6 py-4 whitespace-nowrap"},nt={class:"text-sm font-medium text-gray-900 dark:text-white"},lt={class:"px-6 py-4 whitespace-nowrap"},gt={class:"text-sm text-gray-900 dark:text-white"},ut={class:"px-6 py-4 whitespace-nowrap"},ct={class:"text-sm text-gray-900 dark:text-white"},pt={class:"px-6 py-4 whitespace-nowrap"},xt={class:"text-sm text-gray-900 dark:text-white"},yt={class:"px-6 py-4 whitespace-nowrap bg-gray-50 dark:bg-gray-700"},kt={class:"text-sm text-gray-900 dark:text-white"},mt={class:"px-6 py-4 whitespace-nowrap bg-gray-50 dark:bg-gray-700"},bt={class:"text-sm text-gray-900 dark:text-white"},vt={class:"px-6 py-4 whitespace-nowrap bg-gray-50 dark:bg-gray-700"},ft={class:"text-sm text-gray-900 dark:text-white"},ht={class:"px-6 py-4 whitespace-nowrap bg-gray-50 dark:bg-gray-700"},_t={class:"text-sm text-gray-900 dark:text-white"},wt={class:"px-6 py-4 whitespace-nowrap bg-blue-50 dark:bg-blue-900/20"},$t={class:"text-sm text-gray-900 dark:text-white"},Dt={class:"px-6 py-4 whitespace-nowrap bg-blue-50 dark:bg-blue-900/20"},Ct={class:"text-sm text-gray-900 dark:text-white"},qt={class:"px-6 py-4 whitespace-nowrap bg-blue-50 dark:bg-blue-900/20"},Ft={class:"text-sm text-gray-900 dark:text-white"},St={class:"px-6 py-4 whitespace-nowrap bg-green-50 dark:bg-green-900/20"},Ut={class:"text-sm text-gray-900 dark:text-white"},Pt={class:"px-6 py-4 whitespace-nowrap bg-green-50 dark:bg-green-900/20"},Kt={class:"text-sm text-gray-900 dark:text-white"},Vt={class:"px-6 py-4 whitespace-nowrap bg-green-50 dark:bg-green-900/20"},Bt={class:"text-sm text-gray-900 dark:text-white"},Mt={key:0},Ot={__name:"WarehouseStockTable",props:{items:{type:Array,required:!0}},emits:["sort"],setup(p,{emit:b}){const y=C(),o=b,i=h("current_stock"),d=h("desc");D(()=>{const r=y.query;i.value=r.sort_by||"current_stock",d.value=r.sort_order||"desc"}),V(()=>y.query,r=>{i.value=r.sort_by||"current_stock",d.value=r.sort_order||"desc"},{deep:!0});const g=r=>{i.value===r?d.value=d.value==="asc"?"desc":"asc":(i.value=r,d.value="asc"),o("sort",{sortBy:r==="current"?"current_stock":r,sortOrder:d.value})};return(r,e)=>(u(),c("div",G,[t("table",J,[t("thead",X,[t("tr",null,[t("th",{onClick:e[0]||(e[0]=s=>g("product_name")),class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700"},[t("div",Z,[e[7]||(e[7]=x(" Mahsulot nomi ")),l(m,{active:i.value==="product_name",direction:d.value},null,8,["active","direction"])])]),t("th",{onClick:e[1]||(e[1]=s=>g("store_name")),class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700"},[t("div",tt,[e[8]||(e[8]=x(" Do'kon ")),l(m,{active:i.value==="store_name",direction:d.value},null,8,["active","direction"])])]),t("th",{onClick:e[2]||(e[2]=s=>g("article")),class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700"},[t("div",et,[e[9]||(e[9]=x(" Artikul ")),l(m,{active:i.value==="article",direction:d.value},null,8,["active","direction"])])]),t("th",{onClick:e[3]||(e[3]=s=>g("sku")),class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700"},[t("div",rt,[e[10]||(e[10]=x(" SKU ")),l(m,{active:i.value==="sku",direction:d.value},null,8,["active","direction"])])]),e[11]||(e[11]=t("th",{colspan:"4",class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider bg-gray-100 dark:bg-gray-700"},"Ombor",-1)),e[12]||(e[12]=t("th",{colspan:"3",class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider bg-blue-50 dark:bg-blue-900/20"},"Yuborishlar",-1)),e[13]||(e[13]=t("th",{colspan:"3",class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider bg-green-50 dark:bg-green-900/20"},"Ummumiy",-1))]),t("tr",null,[e[17]||(e[17]=t("th",{class:"px-6 py-3"},null,-1)),e[18]||(e[18]=t("th",{class:"px-6 py-3"},null,-1)),e[19]||(e[19]=t("th",{class:"px-6 py-3"},null,-1)),e[20]||(e[20]=t("th",{class:"px-6 py-3"},null,-1)),e[21]||(e[21]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider bg-gray-100 dark:bg-gray-700"},"Kirim",-1)),e[22]||(e[22]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider bg-gray-100 dark:bg-gray-700"},"Chiqim",-1)),e[23]||(e[23]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider bg-gray-100 dark:bg-gray-700"},"Enter",-1)),e[24]||(e[24]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider bg-gray-100 dark:bg-gray-700"},"Loss",-1)),e[25]||(e[25]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider bg-blue-50 dark:bg-blue-900/20"},"Yuborilgan",-1)),e[26]||(e[26]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider bg-blue-50 dark:bg-blue-900/20"},"Qaytib kelgan",-1)),e[27]||(e[27]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider bg-blue-50 dark:bg-blue-900/20"},"Brak/Obmen",-1)),t("th",{onClick:e[4]||(e[4]=s=>g("total_in")),class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider bg-green-50 dark:bg-green-900/20 cursor-pointer hover:bg-green-100 dark:hover:bg-green-800/20"},[t("div",st,[e[14]||(e[14]=x(" Kirimlar ")),l(m,{active:i.value==="total_in",direction:d.value},null,8,["active","direction"])])]),t("th",{onClick:e[5]||(e[5]=s=>g("total_out")),class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider bg-green-50 dark:bg-green-900/20 cursor-pointer hover:bg-green-100 dark:hover:bg-green-800/20"},[t("div",at,[e[15]||(e[15]=x(" Chiqimlar ")),l(m,{active:i.value==="total_out",direction:d.value},null,8,["active","direction"])])]),t("th",{onClick:e[6]||(e[6]=s=>g("current")),class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider bg-green-50 dark:bg-green-900/20 cursor-pointer hover:bg-green-100 dark:hover:bg-green-800/20"},[t("div",ot,[e[16]||(e[16]=x(" Qoldiq ")),l(m,{active:i.value==="current",direction:d.value},null,8,["active","direction"])])])])]),t("tbody",it,[(u(!0),c(B,null,M(p.items,s=>(u(),c("tr",{key:s.product_id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[t("td",dt,[t("div",nt,n(s.product_name),1)]),t("td",lt,[t("div",gt,n(s.store_name),1)]),t("td",ut,[t("div",ct,n(s.article),1)]),t("td",pt,[t("div",xt,n(s.sku),1)]),t("td",yt,[t("div",kt,n(s.movements.storage.income),1)]),t("td",mt,[t("div",bt,n(s.movements.storage.outcome),1)]),t("td",vt,[t("div",ft,n(s.movements.storage.enter),1)]),t("td",ht,[t("div",_t,n(s.movements.storage.loss),1)]),t("td",wt,[t("div",$t,n(s.movements.actions.send),1)]),t("td",Dt,[t("div",Ct,n(s.movements.actions.returned),1)]),t("td",qt,[t("div",Ft,n(s.movements.actions.defect),1)]),t("td",St,[t("div",Ut,n(s.totals.in),1)]),t("td",Pt,[t("div",Kt,n(s.totals.out),1)]),t("td",Vt,[t("div",Bt,n(s.totals.current),1)])]))),128)),p.items.length?O("",!0):(u(),c("tr",Mt,e[28]||(e[28]=[t("td",{colspan:"14",class:"px-6 py-4 text-center text-sm text-gray-500 dark:text-gray-400"}," Ma'lumot topilmadi ",-1)])))])])]))}},jt={class:"w-full max-w-[2000px] mx-auto px-4 py-8"},Et={class:"space-y-6"},At={class:"bg-white dark:bg-gray-800 shadow rounded-lg"},Nt={key:0,class:"p-4 flex justify-center"},Wt={key:1},Qt={__name:"WarehouseStockHistory",setup(p){const b=j(),y=C(),o=h([]),i=h(!1),d=h({total:0,per_page:20,current_page:1,last_page:1}),r=$((()=>{const a=y.query;return{search:a.search||"",sku:a.sku||"",article:a.article||"",store:a.store||"",fromDate:a.from_date||"",toDate:a.to_date||"",sort_by:a.sort_by||"current_stock",sort_order:a.sort_order||"desc",page:parseInt(a.page)||1,perPage:parseInt(a.per_page)||20}})()),e=()=>{const a={};r.search&&(a.search=r.search),r.sku&&(a.sku=r.sku),r.article&&(a.article=r.article),r.store&&(a.store=r.store),r.fromDate&&(a.from_date=r.fromDate),r.toDate&&(a.to_date=r.toDate),r.sort_by&&r.sort_by!=="current_stock"&&(a.sort_by=r.sort_by),r.sort_order&&r.sort_order!=="desc"&&(a.sort_order=r.sort_order),r.page>1&&(a.page=r.page),r.perPage!==20&&(a.per_page=r.perPage),b.replace({query:a})},s=async()=>{try{i.value=!0;const a=await A(r.page,{search:r.search,sku:r.sku,article:r.article,store:r.store,from_date:r.fromDate,to_date:r.toDate,sort_by:r.sort_by,sort_order:r.sort_order,per_page:r.perPage});o.value=a.data,d.value=a.meta,e()}catch(a){console.error("Error loading warehouse history:",a),o.value=[]}finally{i.value=!1}},q=a=>{r.page=1;const{sort_by:k,sort_order:P}=r;Object.assign(r,a,{sort_by:k,sort_order:P}),s()},F=({sortBy:a,sortOrder:k})=>{r.sort_by=a,r.sort_order=k,s()},S=a=>{r.page=a,s()},U=a=>{r.perPage=a,r.page=1,s()};return D(()=>{s()}),(a,k)=>(u(),c("div",jt,[k[1]||(k[1]=t("div",{class:"mb-6"},[t("h1",{class:"text-2xl font-semibold text-gray-900 dark:text-white"},"Ombor tarixi")],-1)),t("div",Et,[l(Q,{onFilter:q}),t("div",At,[i.value?(u(),c("div",Nt,k[0]||(k[0]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"},null,-1)]))):(u(),c("div",Wt,[l(Ot,{items:o.value,onSort:F},null,8,["items"]),l(E,{meta:d.value,onPageChange:S,onPerPageChange:U},null,8,["meta"])]))])])]))}};export{Qt as default};
